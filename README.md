# Vibe Check (2020)
### Lauren Lee McCarthy and Kyle McDonald

As tracking and surveillance solutions are proposed to guide us through the current crisis, we enact another control system through the passive observation of our neighbors. Are they a threat, or essential to retaining our feeling of humanness? We notice our heightened sense of interdependence. Vibe Check appropriates common surveillance tools including face recognition and expression analysis to catalog the emotional effect exhibition visitors have on one another. Some are identified as evoking expressions of happiness, disgust, sadness, surprise, or boredom. Upon entering the exhibition, visitors are playfully alerted to who these people are, and as they leave, they may find theyâ€™ve earned this distinction themselves.

Commissioned by HeK and MU for the exhibition [Real Feelings](https://www.hek.ch/en/program/events-en/event/opening-real-feelings.html).

## Preparation

* Install Ubuntu 18.04
* Install the ssh server `sudo apt install openssh-server`
* Install curl and zerotier: `sudo apt install curl && curl -s https://install.zerotier.com | sudo bash`
* Join the zerotier network `sudo zerotier-cli join <network id>`
* Add the network to your local `~/.ssh/config` and run `ssh-copy-id`
* Install the NVIDIA drivers (more info in `database/readme.md`)
* Install [Miniconda](https://docs.conda.io/en/latest/miniconda.html) (not Anaconda)
* Install git and checkout the repository `sudo apt install git && git clone https://github.com/lmccart/vibe-check.git`
* Install Chrome

## Setup

Follow the `readme.md` in each folder:

1. `database/`
2. `app/`
3. `face/`
4. `automate/`

## Additional configuration

Disable all desktop notifications:

```
gsettings set org.gnome.desktop.notifications show-banners false
```

## Status check

* CPU should be busy: run `htop` and look for CPU activity.
* GPUs should be busy: run `nvidia-smi`
* Services should be running: `cd automate && ./status`
* Logs should be updating `journalctl -feu vibe-check-face`
* Cameras should be sending data (active) `cd rpi && ./cameras status`

## Start-up and shut-down

Install XBindKeys:

```
sudo apt-get install xbindkeys xbindkeys-config
xbindkeys --defaults > /home/hek/.xbindkeysrc
xbindkeys-config
```

Add an action for `control+shift + q` pointing to:

```
bash /home/hek/Documents/vibe-check/automate/killall-chrome.sh
```

And for `control+shift + c` pointing to:

```
bash /home/hek/Documents/vibe-check/automate/open-chrome.sh
```

Set the machine to automatically reboot daily at 6am:

```
sudo crontab -e
```

Add the following line:

```
0 6   *   *   *    /sbin/shutdown -r +5
```

And then using "Startup Application Preferences", add the `open-chrome.sh` to run on startup.

## Problems

### "System problem detected"

To clear the crash cache run:

`sudo rm /var/crash/*`

### TeamViewer won't start

Use x0vncserver. Run `x0vncserver -passwordfile ~/.vnc/passwd -display :0` remotely and `ssh -N -L 5901:localhost:5900 <hostname>` locally then Screen Share to `localhost:5901`.

### Screens won't stay rotated

Two possibilities:

1. The native Ubuntu monitor configuration in `~/.config/monitors.xml` is overriding the `/etc/X11/xorg.conf` generated by nvidia-settings. Go into the native Ubuntu "Displays" preferences panel and rotate the screens there.
2. Make sure to run `nvidia-settings` from the command line using `sudo`. Otherwise the `xorg.conf` will not be saved correctly.

### pip install hangs indefinitely on Ubuntu

This might be because pip is [waiting for the keyring to be unlocked](https://github.com/pypa/pip/issues/7883#issuecomment-643319919). Add this to `~/.profile`:

```
export PYTHON_KEYRING_BACKEND=keyring.backends.null.Keyring
```

### The screens do not show images

Check the Chrome terminal with `ctrl-shift-J` (outside kiosk mode). Make sure there is a `data.json` and `images/` files.
